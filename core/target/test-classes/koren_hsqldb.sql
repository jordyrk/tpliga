
CREATE TABLE league(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	shortname VARCHAR(255),
	fullname VARCHAR(255));
CREATE TABLE season(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	leagueid INTEGER NOT NULL ,
	numberofteams INTEGER,
	startdate DATE,
	enddate DATE);
CREATE TABLE team(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	externalId INTEGER,
	shortname VARCHAR(255),
	fullname  VARCHAR(255),
	alias  VARCHAR(255)
	);
CREATE TABLE team_season(
	seasonid INTEGER NOT NULL ,
	teamid INTEGER NOT NULL ,
	position INTEGER,
	gamesplayed INTEGER,
	wins INTEGER,
	draws INTEGER,
	losses INTEGER,
	goalsscored INTEGER,
	goalsagainst INTEGER,
	points INTEGER,
	PRIMARY KEY (seasonid,teamid));

CREATE TABLE player(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	externalId INTEGER,
	firstname VARCHAR(255),
	lastname VARCHAR(255),
	alias VARCHAR(255),
	position VARCHAR(32),
	price INTEGER,
	shirtnumber INTEGER,
	soccernetId INTEGER,
	team_id INTEGER );

CREATE TABLE league_match(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	externalId INTEGER,
	matchdate DATETIME,
	homegoals INTEGER,
	awaygoals INTEGER,

	homeshots INTEGER,
	awayshots INTEGER,
	homeshotsontarget INTEGER,
	awayshotsontarget INTEGER,
	homefouls INTEGER,

	awayfouls INTEGER,
	homeoffside INTEGER,
	awayoffside INTEGER,
	homepossesion INTEGER,
	awaypossesion INTEGER,

	homeyellow INTEGER,
	awayyellow INTEGER,
	homered INTEGER,
	awayred INTEGER,
	homesaves INTEGER,

	awaysaves INTEGER,
	hometeamid INTEGER NOT NULL,
	awayteamid INTEGER NOT NULL,
	leagueroundid INTEGER NOT NULL,
	matchUrl VARCHAR(255),
	soccerNetId VARCHAR(255),
	fantasypremierleague_id INTEGER ,
	playerStatsUpdated INTEGER	);

CREATE TABLE league_round(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	seasonid INTEGER NOT NULL,
	roundnumber INTEGER NOT NULL,
	UNIQUE (seasonid, roundnumber)
);

CREATE TABLE player_stats(
	matchid INTEGER NOT NULL ,
	playerid INTEGER NOT NULL ,
	goals INTEGER,
	assists INTEGER,
	owngoal INTEGER,
	missedpenalty INTEGER,
	savedpenalty INTEGER,
	yellowcard INTEGER,
	redcard INTEGER,
	wholegame INTEGER,
	startedgame INTEGER,
	playedMinutes INTEGER,
	points INTEGER,
	shots INTEGER,
	shotsOnGoal INTEGER,
	offsides INTEGER,
	foulsCommited INTEGER,
	foulsDrawn INTEGER,
	saves INTEGER,
	manofthematch INTEGER,
	easportsppi INTEGER,
	teamid INTEGER NOT NULL,
	PRIMARY KEY (matchid,playerid));
CREATE TABLE default_season(
    seasonid INTEGER NOT NULL REFERENCES season(id),
    PRIMARY KEY (seasonid)
);

CREATE VIEW player_stats_season_view AS
  SELECT player_stats.*, season.id AS seasonid, league_round.id AS leagueroundid,  player.position
FROM player_stats
  LEFT OUTER JOIN league_match ON player_stats.matchid = league_match.id
  LEFT OUTER JOIN league_round ON league_match.leagueroundid = league_round.id
  LEFT OUTER JOIN season ON league_round.seasonid = season.id
  LEFT OUTER JOIN player ON player.id = player_stats.playerid;

CREATE VIEW player_team_view AS
  SELECT player.*, team.shortname, team.fullname
FROM player
  LEFT OUTER JOIN team ON player.team_id = team.id;


INSERT INTO league (id,	shortname,fullname) values (1,'PL','Premier League');
INSERT INTO league (id,	shortname,fullname) values (2,'TL','Tippeligaen');


INSERT INTO team (id, externalId, shortname,fullname) values (1,100,'Arsenal','Arsenal');
INSERT INTO team (id, externalId, shortname,fullname) values (2,200,'Aston Villa','Aston Villa');
INSERT INTO team (id, externalId, shortname,fullname) values (3,300,'Birmingham','Birmingham');
INSERT INTO team (id, externalId, shortname,fullname) values (4,400,'Blackburn','Blackburn');
INSERT INTO team (id, externalId, shortname,fullname) values (5,500,'Blackpool','Blackpool');
INSERT INTO team (id, externalId, shortname,fullname) values (6,600,'Bolton','Bolton Wanderers Football Club');
INSERT INTO team (id, externalId, shortname,fullname) values (7,700,'Chelsea','Chelsea');
INSERT INTO team (id, externalId, shortname,fullname) values (8,800,'Everton','Everton');
INSERT INTO team (id, externalId, shortname,fullname) values (9,900,'Fulham','Fulham');
INSERT INTO team (id, externalId, shortname,fullname) values (10,101,'Liverpool','Liverpool');
INSERT INTO team (id, externalId, shortname,fullname) values (11,202,'Man City','Manchester City');
INSERT INTO team (id, externalId, shortname,fullname) values (12,303,'Man Utd','Manchester United');
INSERT INTO team (id, externalId, shortname,fullname) values (13,404,'Newcastle','Newcastle United');
INSERT INTO team (id, externalId, shortname,fullname) values (14,505,'Stoke','Stoke City');
INSERT INTO team (id, externalId, shortname,fullname) values (15,606,'Sunderland','Sunderland');
INSERT INTO team (id, externalId, shortname,fullname, alias) values (16,707,'Tottenham','Tottenham','Tottenham Hotspurs');
INSERT INTO team (id, externalId, shortname,fullname) values (17,808,'West Brom','West Bromwich Albion');
INSERT INTO team (id, externalId, shortname,fullname) values (18,909,'West Ham','West Ham United');
INSERT INTO team (id, externalId, shortname,fullname) values (19,102,'Wigan','Wigan Athletic');
INSERT INTO team (id, externalId, shortname,fullname) values (20,103,'Wolves','Wolverhampton Wanderers');

INSERT INTO season (id,	leagueid, numberofteams, startdate,enddate) values (1,1,20, '2009-08-15','2010-05-15');
INSERT INTO season (id,	leagueid, numberofteams, startdate,enddate) values (2,1,20,'2008-08-15','2009-05-15');
INSERT INTO season (id,	leagueid, numberofteams, startdate,enddate) values (3,2,16,'2009-03-15','2009-10-15');
INSERT INTO season (id,	leagueid, numberofteams, startdate,enddate) values (4,2,16,'2010-03-15','2010-10-15');
INSERT INTO season (id,	leagueid, numberofteams, startdate,enddate) values (5,1,20, '2010-08-15','2011-05-15');
INSERT INTO default_season (seasonid) values (1);


INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (1, 100, 'Chris', 'Basham',NULL, 'DEFENDER',100000,10,108,1 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (2, 200, 'Daniel', 'Yorkahn',NULL, 'MIDFIELDER',200000,3,109,1 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (3, 300, 'Andy', 'Boateng',NULL, 'STRIKER',100000,10,110,2 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (4, 400, 'Lars', 'Orre',NULL, 'STRIKER',100000,11,111,3 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (5, 500, 'Per', 'Snort',NULL, 'STRIKER',100000,13,112,4 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (6, 600, 'Kr', 'Pist',NULL, 'STRIKER',100000,22,113,5 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (7, 700, 'Koren', 'Past',NULL, 'STRIKER',100000,18,114,6 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias, position ,price ,shirtnumber, soccernetID, team_id  ) values (8, 800, 'Smi', 'Bros',NULL, 'STRIKER',100000,3,115,7 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias, position ,price ,shirtnumber, soccernetID, team_id  ) values (9, 9800, 'Dur', 'Brande',NULL, 'STRIKER',100000,4,116,8 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (10, 1000, 'De', 'Polli',NULL, 'STRIKER',100000,5,117,9 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (11, 1100, 'Jo', 'Konde',NULL, 'STRIKER',100000,6,118,10 );
INSERT INTO player (id, externalId, firstname ,lastname ,alias ,position ,price ,shirtnumber, soccernetID, team_id  ) values (12, 1200, 'Ka', 'Master',NULL, 'STRIKER',100000,7,119,11 );

INSERT INTO league_round(id, seasonid, roundnumber) VALUES (1,1,1);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (2,1,2);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (3,1,3);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (4,1,4);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (5,1,5);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (6,1,6);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (7,1,7);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (8,2,1);
INSERT INTO league_round(id, seasonid, roundnumber) VALUES (9,2,2);

INSERT INTO league_match (id, externalId, matchdate, homegoals, awaygoals, homeshots, awayshots, homeshotsontarget, awayshotsontarget, homefouls, awayfouls, homeoffside, awayoffside, homepossesion, awaypossesion, homeyellow, awayyellow, homered, awayred, homesaves, awaysaves, playerStatsUpdated, hometeamid, awayteamid, leagueroundid, matchUrl,soccerNetId) values (1,200,'2009-08-15 16:00:00',2,1,10,5,7,3,8,18,4,6,60,40,1,3,0,0,2,6,1,1,2,1,'http://test.no','111');
INSERT INTO league_match (id, externalId, matchdate, homegoals, awaygoals, homeshots, awayshots, homeshotsontarget, awayshotsontarget, homefouls, awayfouls, homeoffside, awayoffside, homepossesion, awaypossesion, homeyellow, awayyellow, homered, awayred, homesaves, awaysaves, playerStatsUpdated, hometeamid, awayteamid, leagueroundid, matchUrl,soccerNetId) values (2,300,'2009-09-15 16:00:00', 2,1,10,5,7,3,8,18,4,6,60,40,1,3,0,0,2,6,1,2,1,1,'http://teste.no','222');
INSERT INTO league_match (id, externalId, matchdate, homegoals, awaygoals, homeshots, awayshots, homeshotsontarget, awayshotsontarget, homefouls, awayfouls, homeoffside, awayoffside, homepossesion, awaypossesion, homeyellow, awayyellow, homered, awayred, homesaves, awaysaves, playerStatsUpdated, hometeamid, awayteamid, leagueroundid, matchUrl,soccerNetId) values (3,300,'2009-09-15 16:00:00', 0,0,10,5,7,3,8,18,4,6,60,40,1,3,0,0,2,6,0,9,17,1,'http://teste.no','333');

INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (1,1,1,2,3,4,5,6,1,1,1,90,7,1,2,3,4,5,6,1,5,1 );
INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (1,2,1,2,3,4,5,6,1,1,1,90,7,0,0,6,0,0,0,0,5,1 );
INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (2,1,1,2,3,4,5,6,1,1,1,90,7,2,0,0,0,0,0,0,5,1 );
INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (2,2,1,2,3,4,5,6,1,1,1,60,7,4,3,2,1,1,1,0,5,1 );
INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (2,3,1,2,3,4,5,6,1,1,1,45,7,0,2,0,0,0,2,0,5,2 );
INSERT INTO player_stats  (matchid ,playerid ,goals ,assists ,owngoal ,missedpenalty ,savedpenalty ,yellowcard ,redcard ,wholegame ,startedgame ,playedMinutes, points , shots, shotsOnGoal, offsides, foulsCommited, foulsDrawn, saves,manofthematch,easportsppi, teamid) values (1,3,1,2,3,4,5,6,1,1,1,45,7,0,1,0,3,0,0,0,5,1 );

INSERT INTO team_season  (seasonid,teamid,position ,gamesplayed ,wins ,draws ,losses ,goalsscored ,goalsagainst ,points) values (1,1,1,2,3,4,5,6,7,8 );
INSERT INTO team_season  (seasonid,teamid,position ,gamesplayed ,wins ,draws ,losses ,goalsscored ,goalsagainst ,points) values (1,2,1,2,3,4,5,6,7,8 );
INSERT INTO team_season  (seasonid,teamid,position ,gamesplayed ,wins ,draws ,losses ,goalsscored ,goalsagainst ,points) values (2,1,1,2,3,4,5,6,7,8 );
INSERT INTO team_season  (seasonid,teamid,position ,gamesplayed ,wins ,draws ,losses ,goalsscored ,goalsagainst ,points) values (3,2,1,2,3,4,5,6,7,8 );

CREATE TABLE fantasy_season(
    id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
	seasonid INTEGER NOT NULL,
	name VARCHAR(50),
	activeSeason INTEGER NOT NULL,
	maxTeamPrice INTEGER,
	startingNumberOfTransfers INTEGER,
	numberOfTransfersPerRound INTEGER,
	registrationActive INTEGER NOT NULL,
	defaultfantasycompetitionid INTEGER,
	currentroundid INTEGER
);
CREATE TABLE fantasy_manager(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  userId VARCHAR(64) NULL,
  managerName VARCHAR(255) NULL,
  active INTEGER
);
CREATE TABLE fantasy_team(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  name VARCHAR(64) NULL,
  stadium VARCHAR(255) NULL,
  teamSpirit VARCHAR(500) NULL,
  supporterClub VARCHAR(255) NULL,
  latestNews VARCHAR(500) NULL,
  multiMediaImageId INTEGER NULL,
  managerid INTEGER NOT NULL
);
CREATE TABLE fantasy_competition(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  name VARCHAR(64) NOT NULL,
  fantasyseasonid INTEGER NOT NULL,
  numberofteams INTEGER,
  defaultcompetition INTEGER
);

CREATE TABLE fantasy_round(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  round INTEGER NOT NULL,
  openforchange INTEGER,
  fantasyseasonid INTEGER NOT NULL,
  closeDate TIMESTAMP
);

CREATE TABLE fantasy_round_match(
  fantasyroundid INTEGER NOT NULL,
  leaguematchid INTEGER NOT NULL,
  PRIMARY KEY (fantasyroundid,leaguematchid)
);
CREATE TABLE fantasy_competition_team(
  fantasyteamid INTEGER NOT NULL,
  fantasycompetitionid INTEGER NOT NULL,
  PRIMARY KEY (fantasyteamid,fantasycompetitionid)
);
CREATE TABLE fantasy_team_round(
  fantasyteamid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
  official INTEGER,
  officialwhenroundisclosed INTEGER,
  points INTEGER,
  formation VARCHAR (64),
  player_1_id INTEGER NULL,
  player_2_id INTEGER NULL,
  player_3_id INTEGER NULL,
  player_4_id INTEGER NULL,
  player_5_id INTEGER NULL,
  player_6_id INTEGER NULL,
  player_7_id INTEGER NULL,
  player_8_id INTEGER NULL,
  player_9_id INTEGER NULL,
  player_10_id INTEGER NULL,
  player_11_id INTEGER NULL,
  PRIMARY KEY (fantasyteamid,fantasyroundid)
);

CREATE TABLE fantasy_rule(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  ruleType VARCHAR(64) NOT NULL,
  points INTEGER NOT NULL,
  qualifingNumber INTEGER NOT NULL,
  name VARCHAR(64) NOT NULL,
  position VARCHAR(64)
);

CREATE TABLE fantasy_competition_standings(
  fantasyteamid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
  fantasycompetitionid INTEGER NOT NULL,
  accumulatedpoints INTEGER,
  position INTEGER,
  lastroundposition INTEGER,
  points INTEGER,
  avaragepoints INTEGER,
  minimumpoints INTEGER,
  maximumpoints INTEGER,
  PRIMARY KEY (fantasyteamid,fantasyroundid,fantasycompetitionid)
);

CREATE VIEW fantasy_competition_standing_view AS
SELECT
  sum(fantasy_team_round.points) AS sumpoints,
  fantasy_team_round.fantasyteamid,
  fantasy_competition_team.fantasycompetitionid,
  fantasy_competition.name,
  fantasy_season.id AS fantasyseasonid
FROM fantasy_team_round
  LEFT OUTER JOIN fantasy_competition_team ON fantasy_competition_team.fantasyteamid = fantasy_team_round.fantasyteamid
  LEFT OUTER JOIN fantasy_competition ON fantasy_competition.id = fantasy_competition_team.fantasycompetitionid
  LEFT OUTER JOIN fantasy_season ON fantasy_season.id = fantasy_competition.fantasyseasonid
  GROUP BY
  fantasycompetitionid,
  fantasyteamid,
  name,
  fantasy_season.id;

INSERT INTO fantasy_season (id, seasonid, name, activeSeason, registrationActive, defaultfantasycompetitionid, currentroundid) values (1,1,'My season',1, 1, 1, 4);
INSERT INTO fantasy_season (id, seasonid, name, activeSeason, registrationActive, defaultfantasycompetitionid, currentroundid) values (2,1,'Test not active season',0, 0, 1, 0);

INSERT INTO fantasy_manager (id, userId, managerName,active) values (1,'koren@test.no','Koren',1);
INSERT INTO fantasy_manager (id, userId, managerName,active) values (2,'frode@test.no','Fanten',1);
INSERT INTO fantasy_manager (id, userId, managerName,active) values (3,'inactive@test.no','Inactivemanager',0);

INSERT INTO fantasy_team (id, name, stadium, teamSpirit, supporterClub,latestNews,managerId) values (1,'Teamname','Stadium','teamSpirit','supporterClub','latestNews',1);
INSERT INTO fantasy_team (id, name, stadium, teamSpirit, supporterClub,latestNews,managerId) values (2,'Fanteteam','Stadium','teamSpirit','supporterClub','latestNews',2);

INSERT INTO fantasy_competition (id, name, numberofteams, fantasyseasonid, defaultcompetition) values (1,'Standard liga',9,1,1);
INSERT INTO fantasy_competition (id, name, numberofteams, fantasyseasonid, defaultcompetition) values (2,'Tjokkpess2012',2,1,0);

INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (1,'GOALSCORED', 1,1,'Team goals scored', 'ALL');
INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (2,'GOALSCONCEDED', 1,1,'Team goals conceded', 'ALL');
INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (3,'GOAL', 5,1,'Goalie goal' , 'GOALKEEPER');
INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (4,'GOAL', 3,1,'Defender goal' , 'DEFENDER');
INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (5,'GOAL', 2,1,'Striker goal' , 'STRIKER');
INSERT INTO fantasy_rule (id, ruleType, points, qualifingNumber, name, position) values (6,'PLAYEDMINUTES', 1,90,'Whole game', 'ALL');

INSERT INTO fantasy_round (id, round, fantasyseasonid) values (1,1,1);
INSERT INTO fantasy_round (id, round, fantasyseasonid) values (2,2,1);
INSERT INTO fantasy_round (id, round, fantasyseasonid) values (3,3,1);
INSERT INTO fantasy_round (id, round, fantasyseasonid) values (4,4,1);

INSERT INTO fantasy_competition_team (fantasyteamid, fantasycompetitionid) values (1,2);
INSERT INTO fantasy_competition_team (fantasyteamid, fantasycompetitionid) values (2,2);
INSERT INTO fantasy_competition_team (fantasyteamid, fantasycompetitionid) values (1,1);

INSERT INTO fantasy_round_match (fantasyroundid, leaguematchid) values (1,1);
INSERT INTO fantasy_round_match (fantasyroundid, leaguematchid) values (1,2);
INSERT INTO fantasy_round_match (fantasyroundid, leaguematchid) values (1,3);

INSERT INTO fantasy_team_round(fantasyteamid, fantasyroundid, official, officialwhenroundisclosed, points, formation, player_1_id, player_2_id, player_3_id, player_4_id, player_5_id, player_6_id, player_7_id, player_8_id, player_9_id, player_10_id, player_11_id)
                                values (1,1,1,0,10,'FOURFOURTWO', 1,2,3,4,5,6,7,8,9,10,11);
INSERT INTO fantasy_team_round(fantasyteamid, fantasyroundid, official, officialwhenroundisclosed, points, formation, player_1_id, player_2_id, player_3_id, player_4_id, player_5_id, player_6_id, player_7_id, player_8_id, player_9_id, player_10_id, player_11_id)
                                values (1,2,0,0,40,'FOURFOURTWO',1,2,3,4,5,6,7,8,9,10,11);
INSERT INTO fantasy_team_round(fantasyteamid, fantasyroundid, official, officialwhenroundisclosed, points, formation, player_1_id, player_2_id, player_3_id, player_4_id, player_5_id, player_6_id, player_7_id, player_8_id, player_9_id, player_10_id, player_11_id)
                                values (1,3,0,1,22,'FOURFOURTWO',1,2,3,4,5,6,7,8,9,10,11);
INSERT INTO fantasy_team_round(fantasyteamid, fantasyroundid, official, officialwhenroundisclosed, points, formation, player_1_id, player_2_id, player_3_id, player_4_id, player_5_id, player_6_id, player_7_id, player_8_id, player_9_id, player_10_id, player_11_id)
                                values (1,4,1,0,-1,'FOURFOURTWO',1,2,3,4,5,6,7,8,9,10,11);
INSERT INTO fantasy_team_round(fantasyteamid, fantasyroundid, official, officialwhenroundisclosed, points, formation, player_1_id, player_2_id, player_3_id, player_4_id, player_5_id, player_6_id, player_7_id, player_8_id, player_9_id, player_10_id, player_11_id)
                                values (2,1,0,1,18,'FOURFOURTWO',12,2,3,4,5,6,7,8,9,10,11);

INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(1,1,1,10,1,1,10,10,10,10);
INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(1,2,1,20,1,1,10,10,10,10);
INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(1,3,1,40,2,1,20,13,10,20);

INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(2,1,1,9,2,2,9,9,9,9);
INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(2,2,1,18,2,2,9,9,9,9);
INSERT INTO fantasy_competition_standings(fantasyteamid, fantasyroundid, fantasycompetitionid, accumulatedpoints, position, lastroundposition, points, avaragepoints, minimumpoints, maximumpoints) VALUES(2,3,1,58,1,2,40,19,9,40);


CREATE TABLE fantasy_league(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  name VARCHAR(64) NOT NULL,
  fantasyseasonid INTEGER NOT NULL,
  numberofteams INTEGER,
  numberOfTopTeams INTEGER,
  numberOfSecondTopTeams INTEGER,
  numberOfBottomTeams INTEGER,
  numberOfSecondBotttomTeams INTEGER,
    styletheme VARCHAR(64),
  homeandawaymatches INTEGER
);

INSERT INTO fantasy_league (id, name,fantasyseasonid,numberofteams,numberOfTopTeams,numberOfSecondTopTeams ,numberOfBottomTeams ,numberOfSecondBotttomTeams ,styletheme ,homeandawaymatches) values (1,'1 division',1,10,1,2,2,0,'style',0);
INSERT INTO fantasy_league (id, name,fantasyseasonid,numberofteams,numberOfTopTeams,numberOfSecondTopTeams ,numberOfBottomTeams ,numberOfSecondBotttomTeams ,styletheme ,homeandawaymatches) values (2,'2 division',1,10,1,2,2,0,'style',0);
INSERT INTO fantasy_league (id, name,fantasyseasonid,numberofteams,numberOfTopTeams,numberOfSecondTopTeams ,numberOfBottomTeams ,numberOfSecondBotttomTeams ,styletheme ,homeandawaymatches) values (3,'Minileague',1,2,1,2,2,0,'style',1);

CREATE TABLE fantasy_league_team(
  fantasyteamid INTEGER NOT NULL,
  fantasyleagueid INTEGER NOT NULL,
  PRIMARY KEY (fantasyteamid, fantasyleagueid)
);
INSERT INTO fantasy_league_team (fantasyteamid, fantasyleagueid) values (1,3);
INSERT INTO fantasy_league_team (fantasyteamid, fantasyleagueid) values (2,3);


CREATE TABLE fantasy_league_standings(
  fantasyteamid INTEGER NOT NULL,
  fantasyleagueid INTEGER NOT NULL ,
  fantasyroundid INTEGER NOT NULL,
  goalsscored INTEGER,
  goalsagainst INTEGER,
  matcheswon INTEGER,
  matchesdraw INTEGER,
  matcheslost INTEGER,
  position INTEGER,
  points INTEGER,
  lastroundposition INTEGER,
  PRIMARY KEY (fantasyteamid, fantasyleagueid, fantasyroundid)
);
INSERT INTO fantasy_league_standings(fantasyteamid, fantasyleagueid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(1,3,1,2,1,1,0,0,1,3,1);
INSERT INTO fantasy_league_standings(fantasyteamid, fantasyleagueid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(2,3,1,1,2,0,0,2,2,0,1);
INSERT INTO fantasy_league_standings(fantasyteamid, fantasyleagueid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(1,3,2,5,0,2,0,0,1,6,1);
INSERT INTO fantasy_league_standings(fantasyteamid, fantasyleagueid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(2,3,2,0,5,0,0,2,2,0,2);

CREATE TABLE fantasy_league_rounds(
  fantasyleagueid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
  PRIMARY KEY(fantasyleagueid, fantasyroundid)
);
INSERT INTO fantasy_league_rounds(fantasyleagueid, fantasyroundid) VALUES(3,1);
INSERT INTO fantasy_league_rounds(fantasyleagueid, fantasyroundid) VALUES(3,2);

CREATE TABLE fantasy_cup(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  name VARCHAR(64) NOT NULL,
  fantasyseasonid INTEGER NOT NULL,
  numberofteams INTEGER,
  numberOfQualifiedTeamsFromGroups INTEGER
);

INSERT INTO fantasy_cup(id,name, fantasyseasonid, numberofteams,numberOfQualifiedTeamsFromGroups) VALUES(1,'CGO',1,20,4);
INSERT INTO fantasy_cup(id,name, fantasyseasonid, numberofteams,numberOfQualifiedTeamsFromGroups) VALUES(2,'Mini cup',1,2,0);

CREATE TABLE fantasy_cup_team(
  fantasyteamid INTEGER NOT NULL,
  fantasycupid INTEGER NOT NULL,
  PRIMARY KEY (fantasyteamid, fantasycupid)
);
INSERT INTO fantasy_cup_team(fantasyteamid,fantasycupid) VALUES(1,1);
INSERT INTO fantasy_cup_team(fantasyteamid,fantasycupid) VALUES(2,1);

CREATE TABLE fantasy_cup_rounds(
  fantasycupid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
  PRIMARY KEY(fantasycupid, fantasyroundid)
);
INSERT INTO fantasy_cup_rounds(fantasycupid,fantasyroundid) VALUES(1,1);

--TODO:How to set what teams will win group
CREATE TABLE fantasy_cup_group(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  name VARCHAR(64) NOT NULL,
  fantasycupid INTEGER NOT NULL,
  numberofteams INTEGER,
  homeandawaymatches INTEGER
);

INSERT INTO fantasy_cup_group(id,name, fantasycupid, numberofteams,homeandawaymatches) VALUES(1,'Mini cup group A',1,2,1);

CREATE TABLE fantasy_cup_group_team(
  fantasyteamid INTEGER NOT NULL,
  fantasycupgroupid INTEGER NOT NULL,
  PRIMARY KEY (fantasyteamid, fantasycupgroupid)
);
INSERT INTO fantasy_cup_group_team(fantasyteamid, fantasycupgroupid) VALUES(1,1);
INSERT INTO fantasy_cup_group_team(fantasyteamid, fantasycupgroupid) VALUES(2,1);


CREATE TABLE fantasy_cup_group_rounds(
  fantasycupgroupid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
);
INSERT INTO fantasy_cup_group_rounds(fantasycupgroupid,fantasyroundid) VALUES(1,1);
INSERT INTO fantasy_cup_group_rounds(fantasycupgroupid,fantasyroundid) VALUES(1,2);

CREATE TABLE fantasy_cup_group_standings(
  fantasyteamid INTEGER NOT NULL,
  fantasycupgroupid INTEGER NOT NULL,
  fantasyroundid INTEGER NOT NULL,
  goalsscored INTEGER,
  goalsagainst INTEGER,
  matcheswon INTEGER,
  matchesdraw INTEGER,
  matcheslost INTEGER,
  position INTEGER,
  points INTEGER,
  lastroundposition INTEGER,
  PRIMARY KEY (fantasyteamid, fantasycupgroupid,fantasyroundid)

);
INSERT INTO fantasy_cup_group_standings(fantasyteamid, fantasycupgroupid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(1,1,1,2,1,1,0,0,1,3,1);
INSERT INTO fantasy_cup_group_standings(fantasyteamid, fantasycupgroupid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(2,1,1,1,2,0,0,1,1,0,1);
INSERT INTO fantasy_cup_group_standings(fantasyteamid, fantasycupgroupid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(1,1,2,0,3,1,0,1,2,3,1);
INSERT INTO fantasy_cup_group_standings(fantasyteamid, fantasycupgroupid, fantasyroundid, goalsscored,goalsagainst,matcheswon,matchesdraw, matcheslost, position, points, lastroundposition) VALUES(2,1,2,3,0,1,0,1,1,3,2);


CREATE TABLE fantasy_match(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  hometeamid INTEGER NOT NULL,
  awayteamid INTEGER NOT NULL,
  homegoals INTEGER,
  awaygoals INTEGER,
  played INTEGER,
  fantasyroundid  INTEGER NOT NULL
);
--Leaguematches
INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(1,1,2,2,1,1,1);
INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(2,2,1,0,5,1,2);
--Cupmatch
INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(3,2,1,3,2,1,1);
--Cupgroupmatch
INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(4,1,2,2,1,1,1);
INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(5,2,1,3,0,1,2);
--Unkown match

INSERT INTO fantasy_match(id, hometeamid, awayteamid, homegoals,awaygoals,played,fantasyroundid) VALUES(6,2,1,3,0,1,1);

CREATE TABLE fantasy_league_match(
  fantasymatchid INTEGER NOT NULL,
  fantasyleagueid INTEGER NOT NULL,
  PRIMARY KEY(fantasymatchid, fantasyleagueid)
);
INSERT INTO fantasy_league_match(fantasymatchid,fantasyleagueid) VALUES(1,1);
INSERT INTO fantasy_league_match(fantasymatchid,fantasyleagueid) VALUES(2,1);

CREATE TABLE fantasy_cup_match(
  fantasymatchid INTEGER NOT NULL ,
  fantasycupid INTEGER NOT NULL,
  PRIMARY KEY(fantasymatchid, fantasycupid)
);
INSERT INTO fantasy_cup_match(fantasymatchid,fantasycupid) VALUES(3,1);

CREATE TABLE fantasy_cup_group_match(
  fantasymatchid INTEGER NOT NULL,
  fantasycupgroupid INTEGER NOT NULL,
  PRIMARY KEY(fantasymatchid, fantasycupgroupid)
);
INSERT INTO fantasy_cup_group_match(fantasymatchid,fantasycupgroupid) VALUES(4,1);
INSERT INTO fantasy_cup_group_match(fantasymatchid,fantasycupgroupid) VALUES(5,1);

CREATE VIEW fantasy_league_match_view AS
  SELECT fantasy_match.*, fantasy_league_match.fantasyleagueid
FROM fantasy_league_match
  LEFT OUTER JOIN fantasy_match ON fantasy_league_match.fantasymatchid = fantasy_match.id;

CREATE VIEW fantasy_cup_match_view AS
  SELECT fantasy_match.*, fantasy_cup_match.fantasycupid
FROM fantasy_cup_match
  LEFT OUTER JOIN fantasy_match ON fantasy_cup_match.fantasymatchid = fantasy_match.id;

CREATE VIEW fantasy_cup_group_match_view AS
  SELECT fantasy_match.*, fantasy_cup_group_match.fantasycupgroupid
FROM fantasy_cup_group_match
  LEFT OUTER JOIN fantasy_match ON fantasy_cup_group_match.fantasymatchid = fantasy_match.id;

CREATE TABLE chatmessage(
  id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
  managerId INTEGER NULL,
  message VARCHAR(1024),
  createdDate TIMESTAMP
);

INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(1,1, 'Message 1','2009-08-15 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(2,1, 'Message 1','2009-08-16 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(3,1, 'Message 1','2009-08-17 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(4,1, 'Message 1','2009-08-18 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(5,1, 'Message 1','2009-08-19 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(6,1, 'Message 1','2009-08-20 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(7,2, 'Message 1','2009-08-21 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(8,2, 'Message 1','2009-08-22 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(9,3, 'Message 1','2009-08-23 12:00:00');
INSERT INTO chatmessage(id,managerId,message,createdDate) VALUES(10,4, 'Message 1','2009-08-24 12:00:00');

CREATE VIEW player_team_round_view AS
SELECT player.id, fantasy_team_round.fantasyteamid, fantasy_team_round.fantasyroundid FROM player, fantasy_team_round
  WHERE  (player.id = fantasy_team_round.player_1_id
  OR player.id = fantasy_team_round.player_2_id
  OR player.id = fantasy_team_round.player_3_id
  OR player.id = fantasy_team_round.player_4_id
  OR player.id = fantasy_team_round.player_5_id
  OR player.id = fantasy_team_round.player_6_id
  OR player.id = fantasy_team_round.player_7_id
  OR player.id = fantasy_team_round.player_8_id
  OR player.id = fantasy_team_round.player_9_id
  OR player.id = fantasy_team_round.player_10_id
  OR player.id = fantasy_team_round.player_11_id);